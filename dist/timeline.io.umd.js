(()=>{var ye=Object.defineProperty,ve=Object.defineProperties;var Te=Object.getOwnPropertyDescriptors;var G=Object.getOwnPropertySymbols;var we=Object.prototype.hasOwnProperty,De=Object.prototype.propertyIsEnumerable;var J=(h,g,l)=>g in h?ye(h,g,{enumerable:!0,configurable:!0,writable:!0,value:l}):h[g]=l,A=(h,g)=>{for(var l in g||(g={}))we.call(g,l)&&J(h,l,g[l]);if(G)for(var l of G(g))De.call(g,l)&&J(h,l,g[l]);return h},Y=(h,g)=>ve(h,Te(g));var Q=(h,g,l)=>new Promise((y,v)=>{var S=u=>{try{a(l.next(u))}catch(f){v(f)}},m=u=>{try{a(l.throw(u))}catch(f){v(f)}},a=u=>u.done?y(u.value):Promise.resolve(u.value).then(S,m);a((l=l.apply(h,g)).next())});var ee=(h,g)=>{let l,y,v,S,m,a,u,f,N,H,x=525948.766,te=x/12*18,ne=10080*6,re=1440*4,ie=(e,n)=>{m.addEventListener(e,n,!0)},se=e=>Q(void 0,null,function*(){if(!e)throw new Error("Argument is empty. Please provide a loader function as first arg");O(yield e())}),O=e=>{if(!e)throw new Error("Event argument is empty. Please provide Timeline event as first arg");W(H,e),R()},V=e=>e.start<w()&&e.end>$(),oe=(e,n)=>{if(!e)throw new Error("Element argument is empty. DOM element | selector as first arg");if(typeof e=="string"){let s=document.querySelector(e);if(!s)throw new Error(`Selector could not be found [${m}]`);m=s}e instanceof HTMLElement&&(m=e),a=A({labelCount:5,zoomSpeed:.025,dragSpeed:.001,timelineStart:"-1B",timelineEnd:"1M",start:"-100",end:"now",minZoom:1,maxZoom:1e11,position:"bottom",eventHeight:5,autoFocus:!0,classNames:{timeline:"tl",timelineEvent:"tl__event",timelineEventTitle:"tl__event__title",timelineLabels:"tl__labels",timelineDividers:"tl__dividers",timelineEvents:"tl__events",timelineLabel:"tl__label",timelineDivider:"tl__divider"}},n),H=K({title:"View",type:"container",start:a.start,end:a.end}),v=F(a.timelineStart),S=F(a.timelineEnd);let r=H.start,t=H.end;r<v&&(v=r),t>S&&(S=t);let i=t-r;l=_()/i,y=(v-r)/i,me(),de(m),R()},_=()=>S-v,ae=()=>m.offsetWidth||0,w=()=>v-T()*y,$=()=>w()+T(),T=()=>_()/l,le=()=>a.zoomSpeed*l,C=e=>(e-w())/T(),z=e=>(e-v)/_(),ce=(e,n)=>{let r=l-n;return e===1&&r<=a.minZoom||e===-1&&r>=a.maxZoom?!1:(l=r,!0)},P=e=>{let n=y+e;n>=0&&(n=0),n+l<=1&&(n=1-l),y=n},U=(e,n)=>{let r=e*le(),t=n*r;ce(e,r)&&P(t),R()},X=e=>{P(e*a.dragSpeed),R()},j=e=>{if(!e)return;let n=0,r=e.duration*.05,t=e.start-r,s=e.end+r-t,b=_()/s,c=Math.sign(l-b);if(c>0){let M=(w()+T()/2-t)/s,I=w()+T()*M;n=z(I)}else{let p=t+s/2,M=C(p),I=t+s*M;n=z(I)}let o=()=>{clearInterval(D);let p=y-(t-w())/T(),M=Math.sign(p-y),I=()=>{clearInterval(k),m.dispatchEvent(new CustomEvent("focus.tl.event",{detail:e,bubbles:!0,cancelable:!0}))},k=setInterval(()=>{X(M*10),M<0&&y<p&&I(),M>0&&y>p&&I()},1)},D=setInterval(()=>{U(c,n),c<0&&l>b&&o(),c>0&&l<b&&o()},1)},de=e=>{window.addEventListener("resize",()=>{R()},{passive:!0}),e.addEventListener("wheel",s=>{if(s.defaultPrevented)return;var b=Math.sign(s.deltaY);let D=(((s.target.attributes.starttime?C(s.target.attributes.starttime):0)*e.getBoundingClientRect().width+s.offsetX)/ae()-y)/l;U(b,D)},{passive:!0});let n,r,t=!1,i=!0;e.addEventListener("mousedown",s=>{t=!0,n=s.pageX,r=s.pageY},{passive:!0}),e.addEventListener("mousemove",s=>{if(!t||!i)return;i=!1;let b=s.pageX-n;b&&X(b),n=s.pageX,r=s.pageY,setTimeout(()=>i=!0,10)},{passive:!0}),e.addEventListener("mouseup",()=>{t=!1},{passive:!0})},Z=e=>{if(!e||e.start>=$()||e.end<=w())return;let n=document.createDocumentFragment(),r=()=>{n.append(...e.children.reduce((s,b)=>{let c=Z(Y(A({},b),{level:e.level+(b.level-1)}));return c&&s.push(c),s},new Array))},t=s=>{let b=e.level*1.5,c=s?0:C(e.start),d=s?100:e.duration/T()*100,o=document.createElement("div"),D=e.color.map(p=>p-Math.pow(10,1));o.style.bottom=`${b*a.eventHeight}px`,o.style.minHeight=`${a.eventHeight}px`,o.style.borderRadius="5px",o.style.boxSizing="border-box",o.style.cursor="pointer",o.style.border=`1px solid rgba(${D.join(",")})`,o.style.backgroundColor=`rgb(${e.color.join(",")})`,o.style.zIndex=e.depth.toString(),o.addEventListener("click",p=>{m.dispatchEvent(new CustomEvent("click.tl.event",{detail:e,bubbles:!0,cancelable:!0})),a.autoFocus&&j(e)}),o.style.left=c*100+"%",o.style.width=d+"%",o.style.position="absolute",o.style.minWidth="5px",o.title=e.title,o.classList.add(a.classNames.timelineEvent),o.attributes.starttime=s?w():e.start,n.appendChild(o)},i=s=>{let b=s?0:C(e.start),c=s?100:e.duration/T()*100,d=document.createElement("div");d.style.left=b*100+"%",d.style.width=c+"%",d.style.position="absolute",d.style.minWidth="5px",d.style.overflow="hidden",d.style.bottom="0px",d.style.minHeight="100%",d.style.backgroundColor=`rgb(${e.color.join(",")})`,d.title=e.title,d.classList.add(a.classNames.timelineEvent),d.attributes.starttime=s?w():e.start,n.appendChild(d);let o=document.createElement("div");o.title=e.title,o.innerText=e.title,o.style.whiteSpace="nowrap",o.style.pointerEvents="none",o.style.userSelect="none",o.classList.add(a.classNames.timelineEventTitle),d.appendChild(o)};switch(e.type){case"container":r();break;case"timeline":{t(V(e));break}case"background":{i(V(e));break}}return n},me=()=>{m.style.position="relative",m.style.overflow="hidden",m.style.minHeight="3rem";let e=m.querySelector(`.${a.classNames.timelineLabels}`);switch(u=e||document.createElement("div"),e||m.appendChild(u),u.classList.add(a.classNames.timelineLabels),u.style.width="100%",u.style.height="50px",u.style.textAlign="center",u.style.position="absolute",u.style.pointerEvents="none",u.style.userSelect="none",a.position){case"top":u.style.top="0";break;default:u.style.bottom="0"}let n=m.querySelector(`.${a.classNames.timelineDividers}`);f=n||document.createElement("div"),n||m.appendChild(f),f.classList.add(a.classNames.timelineDividers),f.style.width="100%",f.style.height="100%",f.style.position="absolute",f.style.zIndex="-2",f.style.bottom="0";let r=m.querySelector(`.${a.classNames.timelineEvents}`);N=r||document.createElement("div"),r||m.appendChild(N),N.classList.add(a.classNames.timelineEvents),N.style.position="absolute",N.style.bottom="50px",N.style.height="calc(100% - 50px)",N.style.width="100%"},ue=e=>{let n=Math.floor(e/x),r=n+1970,i=r>-1e4&&r<1e4?r.toString():r.toLocaleString("en-US",{notation:"compact",minimumFractionDigits:1,maximumFractionDigits:1}),s=Math.abs(e-n*x),c=e>27e4*x*-1&&e<27e4*x?new Date(e*6e4):new Date(s*6e4);return T()<re?[Intl.DateTimeFormat(void 0,{month:"short",day:"numeric"}).format(c),i,Intl.DateTimeFormat(void 0,{hour:"numeric",minute:"numeric"}).format(c)].join(" "):T()<ne?[Intl.DateTimeFormat(void 0,{month:"short",day:"numeric"}).format(c),i].join(" "):T()<te?[Intl.DateTimeFormat(void 0,{month:"short"}).format(c),i].join(" "):i},R=()=>{if(!m)return;let e=Math.floor(l),n=Math.pow(2,Math.floor(Math.log2(e))),r=1/(a.labelCount+1),t=w()-v,s=_()*r/n,c=Math.floor(t/s)*s,d=document.createDocumentFragment(),o=document.createDocumentFragment();for(let p=0;p<a.labelCount+2;p++){let M=(p+1)*s+v+c-s,I=M+s/2,he=C(M)*100,pe=C(I)*100,L=document.createElement("div");L.classList.add(a.classNames.timelineLabel),L.style.left=he+"%",L.style.top="50%",L.style.transform="translate(calc(-50%), calc(-50%))",L.style.textAlign="center",L.style.position="absolute",L.style.zIndex="-1",L.style.width=r*100+"%",L.innerHTML=ue(M),d.appendChild(L);let E=document.createElement("div");E.classList.add(a.classNames.timelineDivider),E.style.left=pe+"%",E.style.textAlign="center",E.style.position="absolute",E.style.height="100%",E.style.zIndex="-10",E.innerHTML="",o.appendChild(E)}u.innerHTML="",u.appendChild(d),f.innerHTML="",f.appendChild(o);let D=Z(H);N.innerHTML="",D&&N.appendChild(D),m.dispatchEvent(new CustomEvent("update.tl",{detail:{options:a,viewStartDate:w(),viewEndDate:$(),viewDuration:T(),ratio:l,pivot:y},bubbles:!0,cancelable:!0,composed:!1}))},F=e=>{if(e===void 0)return new Date().getTime()/6e4;let n=t=>{let i=new Date;return i.setDate(t[2]?t[2]:1),i.setMonth(t[1]?t[1]-1:0),i.setHours(t[3]?t[3]:0),i.setMinutes(t[4]?t[4]:0),i.setSeconds(0),t[0]?t[0]&&t[0]>-27e4&&t[0]<27e4?(i.setFullYear(t[0]),i.getTime()/6e4):525948.766*t[0]+i.getTime()/6e4:i.getTime()/6e4},r=t=>{switch(t){case"now":return n([]);default:let i=Number(t.replace(/y$/,""));if(!isNaN(i))return n([i+1970]);let s=Number(t.replace(/K$/,""));if(!isNaN(s))return n([s*1e3]);let b=Number(t.replace(/M$/,""));if(!isNaN(b))return n([b*1e6]);let c=Number(t.replace(/B$/,""));if(!isNaN(c))return n([c*1e9]);let d=Number(t.replace(/bc$/,""));if(!isNaN(d))return n([-d]);let o=Number(t.replace(/ad$/,""));if(!isNaN(o))return n([o]);let D=Date.parse(t);return isNaN(D)?new Date().getTime()/6e4:D/6e4}};if(Array.isArray(e)){let t=e;if(t.length===0)throw new Error("argument Array cannot be empty");if(!t.every(s=>typeof s=="number"))throw new Error("input Array must contain only numbers");return n(t)}if(typeof e=="object"&&e.constructor.name==="Date")return e.getTime()/6e4;if(typeof e=="string")return r(e);if(typeof e=="number")return new Date(e).getTime()/6e4},be=e=>e.every(n=>typeof n=="number"),B=e=>e.start?e.children.length?Math.min(e.start,e.children[0].start):e.start:e.children.length?e.children[0].start:void 0,q=e=>e.end?e.end:e.duration&&!isNaN(Number(e.duration))?e.start+Number(e.duration):e.children.length&&e.children[e.children.length-1].end||e.start+1,ge=(e,n)=>{let r=0;for(let t in n.levelMatrix)if(r=Number(t),e.start>n.levelMatrix[t].time){for(let i=0;i<e.height;i++)n.levelMatrix[(r+i).toString()]={height:e.height,time:e.end};return r}r++;for(let t=0;t<e.height;t++)n.levelMatrix[(r+t).toString()]={height:e.height,time:e.end};return r},W=(e,...n)=>{let r=(i,s)=>i.duration/s.duration*i.children.length||1,t=n.map(i=>K(i,e)).filter(i=>!!i);t&&t.length&&e&&(e.children.push(...t),e.children.sort((i,s)=>i.start-s.start),e.start=B(e),e.end=q(e),e.duration=e.end-e.start,e.levelMatrix={1:{height:0,time:Number.MIN_SAFE_INTEGER}},e.children.forEach((i,s)=>{i.score=["container","timeline"].includes(i.type)?r(i,e):0,i.level=["container","timeline"].includes(i.type)?ge(i,e):0})),e.height=e.children.length?Math.max.apply(1,e.children.map(i=>i.level)):1},K=(e,n)=>{if(!e){console.warn("Event object is empty");return}let r=Y(A({type:"timeline",duration:0,level:1,step:0,score:0,height:1,children:[],depth:n?n.depth+1:0},e),{color:e.color?be(e.color)?e.color:[140,140,140,e.type==="background"?.1:1]:[140,140,140,e.type==="background"?.1:1],start:F(e.start),end:F(e.end)});if(e.events&&e.events.length&&W(r,...e.events),r.start=B(r),!r.start){console.warn("Missing start property on event - skipping",e);return}return r.end=q(r),r.duration=r.end-r.start,r},fe=e=>{let n=[],r=e.querySelectorAll(".timelineEvent");return r&&r.forEach(t=>{try{n.push(Y(A({},t.attributes),{events:fe(t)}))}catch(i){console.error(i,"timelineEvent")}}),n};return oe(h,g),{focus:j,load:se,add:O,on:ie}};window.Timeline=ee;})();
