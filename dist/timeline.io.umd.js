(()=>{var ge=Object.defineProperty,he=Object.defineProperties;var ye=Object.getOwnPropertyDescriptors;var J=Object.getOwnPropertySymbols;var pe=Object.prototype.hasOwnProperty,Te=Object.prototype.propertyIsEnumerable;var K=(g,b,a)=>b in g?ge(g,b,{enumerable:!0,configurable:!0,writable:!0,value:a}):g[b]=a,k=(g,b)=>{for(var a in b||(b={}))pe.call(b,a)&&K(g,a,b[a]);if(J)for(var a of J(b))Te.call(b,a)&&K(g,a,b[a]);return g},F=(g,b)=>he(g,ye(b));var Q=(g,b,a)=>new Promise((C,y)=>{var x=c=>{try{u(a.next(c))}catch(f){y(f)}},d=c=>{try{u(a.throw(c))}catch(f){y(f)}},u=c=>c.done?C(c.value):Promise.resolve(c.value).then(x,d);u((a=a.apply(g,b)).next())});var U=(g,b)=>{let a,C,y,x,d,u,c,f,M,X,E,W=(e,t)=>{d.addEventListener(e,t)},ee=e=>Q(void 0,null,function*(){if(!e)throw new Error("Argument is empty. Please provide a loader function as first arg");P(yield e())}),P=e=>{if(!e)throw new Error("Event argument is empty. Please provide Timeline event as first arg");B(E,e),R()},ve=e=>e.start<H()&&e.end>h(),we=e=>e.start>h()&&e.end<H(),Y=e=>e.start<h()&&e.end>H(),De=e=>e.duration>p(),te=(e,t)=>{if(!e)throw new Error("Element argument is empty. DOM element | selector as first arg");if(typeof e=="string"){let o=document.querySelector(e);if(!o)throw new Error(`Selector could not be found [${d}]`);d=o}e instanceof HTMLElement&&(d=e),u=k({labelCount:5,zoomSpeed:.025,dragSpeed:.001,timelineStart:"-270000",timelineEnd:"1000y",start:"-1000y",end:"100y",minZoom:1,maxZoom:1e11,position:"bottom",expandRatio:80,eventHeight:5},t),E=_({title:"View",type:"container",start:u.start,end:u.end}),y=A(u.timelineStart),x=A(u.timelineEnd);let r=E.start,i=E.end;r<y&&(y=r),i>x&&(x=i);let n=i-r;a=N()/n,C=(y-r)/n,X=E,ae(),se(d),R()},N=()=>x-y,ne=()=>d.offsetWidth||0,h=()=>y-p()*C,H=()=>h()+p(),p=()=>N()/a,re=()=>u.zoomSpeed*a,S=e=>(e-h())/p(),Z=e=>(e-y)/N(),ie=(e,t)=>{let r=a-t;return e===1&&r<=u.minZoom||e===-1&&r>=u.maxZoom?!1:(a=r,!0)},j=e=>{let t=C+e;t>=0&&(t=0),t+a<=1&&(t=1-a),C=t},$=(e,t)=>{let r=e*re(),i=t*r;ie(e,r)&&j(i),R()},V=e=>{j(e*u.dragSpeed),R()},oe=e=>{if(!e)return;let t=0,r=e.start-e.duration*.05,n=e.end+e.duration*.05-r,o=N()/n,m=Math.sign(a-o);if(m>0){let w=(h()+p()/2-r)/n,I=h()+p()*w;t=Z(I)}else{let v=r+n/2,w=S(v),I=r+n*w;t=Z(I)}let l=()=>{clearInterval(s);let v=setInterval(()=>{if(e.start<h()){V(10);return}if(e.end>H()){V(-10);return}clearInterval(v)},1)},s=setInterval(()=>{$(m,t),m<0&&a>o&&l(),m>0&&a<o&&l()},1)},se=e=>{window.addEventListener("resize",()=>{R()},{passive:!0}),e.addEventListener("wheel",o=>{if(o.defaultPrevented)return;var m=Math.sign(o.deltaY);let v=(((o.target.attributes.starttime?S(o.target.attributes.starttime):0)*e.getBoundingClientRect().width+o.offsetX)/ne()-C)/a;$(m,v)},{passive:!0});let t,r,i=!1,n=!0;e.addEventListener("mousedown",o=>{i=!0,t=o.pageX,r=o.pageY},{passive:!0}),e.addEventListener("mousemove",o=>{if(!i||!n)return;n=!1;let m=o.pageX-t;m&&V(m),t=o.pageX,r=o.pageY,setTimeout(()=>n=!0,10)},{passive:!0}),e.addEventListener("mouseup",()=>{i=!1},{passive:!0})},O=e=>{if(!e||e.start>=H()||e.end<=h())return;let t=document.createDocumentFragment(),r=()=>{t.append(...e.children.reduce((o,m)=>{let T=O(F(k({},m),{level:e.level+(m.level-1)}));return T&&o.push(T),o},new Array))},i=o=>{let m=e.level*1.5,T=o?0:S(e.start),l=o?100:e.duration/p()*100,s=document.createElement("div"),v=e.color.map(w=>w-Math.pow(10,1));s.style.bottom=`${m*u.eventHeight}px`,s.style.minHeight=`${u.eventHeight}px`,s.style.borderRadius="5px",s.style.boxSizing="border-box",s.style.cursor="pointer",s.style.border=`1px solid rgba(${v.join(",")})`,s.style.backgroundColor=`rgb(${e.color.join(",")})`,s.style.zIndex=e.depth.toString(),s.addEventListener("click",w=>{s.dispatchEvent(new CustomEvent("event-click",{detail:e,bubbles:!0,cancelable:!0}))}),s.style.left=T*100+"%",s.style.width=l+"%",s.style.position="absolute",s.style.minWidth="5px",s.title=e.title,s.className="timelineEventGenerated",s.attributes.starttime=o?h():e.start,t.appendChild(s)},n=o=>{let m=o?0:S(e.start),T=o?100:e.duration/p()*100,l=document.createElement("div");l.style.left=m*100+"%",l.style.width=T+"%",l.style.position="absolute",l.style.minWidth="5px",l.style.overflow="hidden",l.style.bottom="0px",l.style.minHeight="100%",l.style.backgroundColor=`rgb(${e.color.join(",")})`,l.title=e.title,l.className="timelineEventGenerated",l.attributes.starttime=o?h():e.start,t.appendChild(l);let s=document.createElement("div");s.title=e.title,s.innerText=e.title,s.className="timelineEventGeneratedTitle",s.style.whiteSpace="nowrap",s.style.pointerEvents="none",s.style.userSelect="none",l.appendChild(s)};switch(e.type){case"container":r();break;case"timeline":{i(Y(e));break}case"background":{n(Y(e));break}}return t},ae=()=>{d.style.position="relative",d.style.overflow="hidden",d.style.minHeight="3rem";let e=d.querySelector(".timelineLabelContainer");switch(c=e||document.createElement("div"),e||d.appendChild(c),c.className="timelineLabelContainer",c.style.width="100%",c.style.height="50px",c.style.textAlign="center",c.style.position="absolute",c.style.pointerEvents="none",c.style.userSelect="none",u.position){case"top":c.style.top="0";break;default:c.style.bottom="0"}let t=d.querySelector(".timelineDividerContainer");f=t||document.createElement("div"),t||d.appendChild(f),f.className="timelineDividerContainer",f.style.width="100%",f.style.height="100%",f.style.position="absolute",f.style.zIndex="-2",f.style.bottom="0";let r=d.querySelector(".timelineEventsContainer");M=r||document.createElement("div"),r||d.appendChild(M),M.className="timelineEventsContainer",M.style.position="absolute",M.style.bottom="50px",M.style.height="calc(100% - 50px)",M.style.width="100%"},le=e=>{let t=new Date(e*6e4);return p()<5760?Intl.DateTimeFormat(void 0,{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"}).format(t):p()<60480?Intl.DateTimeFormat(void 0,{year:"numeric",month:"short",day:"numeric"}).format(t):p()<788923.1502?Intl.DateTimeFormat(void 0,{year:"numeric",month:"short"}).format(t):t.getFullYear().toString()},R=()=>{if(!d)return;let e=Math.floor(a),t=Math.pow(2,Math.floor(Math.log2(e))),r=1/(u.labelCount+1),i=h()-y,o=N()*r/t,T=Math.floor(i/o)*o,l=document.createDocumentFragment(),s=document.createDocumentFragment();for(let w=0;w<u.labelCount+2;w++){let I=(w+1)*o+y+T-o,z=I+o/2,be=S(I)*100,fe=S(z)*100,D=document.createElement("div");D.className="timelineLabel",D.style.left=be+"%",D.style.top="50%",D.style.transform="translate(calc(-50%), calc(-50%))",D.style.textAlign="center",D.style.position="absolute",D.style.zIndex="-1",D.style.width=r*100+"%",D.innerHTML=le(I),l.appendChild(D);let L=document.createElement("div");L.className="timelineDivider",L.style.left=fe+"%",L.style.textAlign="center",L.style.position="absolute",L.style.height="100%",L.style.zIndex="-10",L.innerHTML="",s.appendChild(L)}c.innerHTML="",c.appendChild(l),f.innerHTML="",f.appendChild(s);let v=O(X);M.innerHTML="",v&&M.appendChild(v),d.dispatchEvent(new CustomEvent("update",{detail:me(),bubbles:!0,cancelable:!0,composed:!1}))},A=e=>{if(e===void 0)return;let t=i=>{let n=new Date;if(n.setDate(i[2]?i[2]:1),n.setMonth(i[1]?i[1]-1:0),n.setHours(i[3]?i[3]:0),n.setMinutes(i[4]?i[4]:0),n.setSeconds(0),!i[0])return n.getTime()/6e4;if(i[0]&&i[0]>-27e4&&i[0]<27e4)return n.setFullYear(i[0]),n.getTime()/6e4;let o=525948.766*i[0];return n.setFullYear(0),o+n.getTime()/6e4},r=i=>{switch(i){case"now":return new Date;default:let n=Number(i.replace(/y$/,""));return isNaN(n)?new Date(i):new Date(Date.now()+31556926*1e3*n)}};if(Array.isArray(e)){let i=e;if(i.length===0)throw new Error("argument Array cannot be empty");if(!i.every(o=>typeof o=="number"))throw new Error("input Array must contain only numbers");return t(i)}if(typeof e=="object"&&e.constructor.name==="Date")return e.getTime()/6e4;if(typeof e=="string")return r(e).getTime()/6e4;if(typeof e=="number")return new Date(e).getTime()/6e4},ce=e=>e.every(t=>typeof t=="number"),q=e=>e.start?e.children.length?Math.min(e.start,e.children[0].start):e.start:e.children.length?e.children[0].start:void 0,G=e=>e.end?e.end:e.duration&&!isNaN(Number(e.duration))?e.start+Number(e.duration):e.children.length&&e.children[e.children.length-1].end||e.start+1,de=(e,t)=>{let r=0;for(let i in t.levelMatrix)if(r=Number(i),e.start>t.levelMatrix[i].time){for(let n=0;n<e.height;n++)t.levelMatrix[(r+n).toString()]={height:e.height,time:e.end};return r}r++;for(let i=0;i<e.height;i++)t.levelMatrix[(r+i).toString()]={height:e.height,time:e.end};return r},B=(e,...t)=>{let r=(n,o)=>n.duration/o.duration*n.children.length||1,i=t.map(n=>_(n,e)).filter(n=>!!n);i&&i.length&&e&&(e.children.push(...i),e.children.sort((n,o)=>n.start-o.start),e.start=q(e),e.end=G(e),e.duration=e.end-e.start,e.levelMatrix={1:{height:0,time:Number.MIN_SAFE_INTEGER}},e.children.forEach((n,o)=>{n.score=["container","timeline"].includes(n.type)?r(n,e):0,n.level=["container","timeline"].includes(n.type)?de(n,e):0})),e.height=e.children.length?Math.max.apply(1,e.children.map(n=>n.level)):1},_=(e,t)=>{if(!e){console.warn("Event object is empty");return}let r=F(k({type:"timeline",duration:0,level:1,step:0,score:0,height:1,children:[],depth:t?t.depth+1:0},e),{color:e.color?ce(e.color)?e.color:[140,140,140,e.type==="background"?.1:1]:[140,140,140,e.type==="background"?.1:1],start:A(e.start),end:A(e.end)});if(e.events&&e.events.length&&B(r,...e.events),r.start=q(r),!r.start){console.warn("Missing start property on event - skipping",e);return}return r.end=G(r),r.duration=r.end-r.start,r},ue=e=>{let t=[],r=e.querySelectorAll(".timelineEvent");return r&&r.forEach(i=>{try{t.push(F(k({},i.attributes),{events:ue(i)}))}catch(n){console.error(n,"timelineEvent")}}),t},me=()=>({options:u,viewStartDate:h(),viewEndDate:H(),viewDuration:p(),ratio:a,pivot:C});return te(g,b),{focus:oe,load:ee,add:P,on:W}};window.Timeline=U;})();
